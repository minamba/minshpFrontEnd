/* ===========================
   Product Card + badges + prix
   =========================== */

/* Section & grilles par défaut (desktop) */
.new-section { padding: 5rem 2rem; }

.new-grid{
  display:grid;
  grid-template-columns:repeat(4, 1fr);
  gap:20px;
}

/* --- Carte produit --- */
.product-card{
  background:#ffffff;
  border-radius:20px;
  box-shadow:var(--shadow-2);
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:10px;
  transition:box-shadow .2s, transform .12s;
}
.product-card:hover{
  transform:translateY(-2px);
  box-shadow:0 16px 36px rgba(0,0,0,.08);
}

/* --- Zone image --- */
.product-thumb{
  position:relative;
  width:100%;
  aspect-ratio:4/3;
  background:#fff;
  border-radius:12px;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:10px;
  transition:background-color .2s ease;
}
.product-thumb img,
.product-thumb picture>img{
  max-width:100%;
  max-height:100%;
  object-fit:contain !important;
  background:transparent;
  border:0;
  outline:0;
  box-shadow:none;
  display:block;
}

/* --- Overlay --- */
.thumb-overlay{
  position:absolute;
  inset:0;
  border-radius:12px;
  background:rgba(0,0,0,0);
  opacity:0;
  transition:background .18s ease, opacity .18s ease;
  pointer-events:none;
}
.product-card:hover .thumb-overlay{ background:rgba(0,0,0,.18); opacity:1; }

/* --- Bouton ajout panier --- */
.thumb-add-btn{
  position:absolute;
  right:10px; bottom:10px;
  width:42px; height:42px;
  border:0; border-radius:12px;
  background:#365afc; color:#fff;
  display:flex; align-items:center; justify-content:center;
  box-shadow:0 8px 20px rgba(0,0,0,.18);
  cursor:pointer;
  opacity:0; transform:translateY(6px);
  transition:opacity .18s, transform .18s, filter .18s;
}
.product-card:hover .thumb-add-btn{ opacity:1; transform:translateY(0); }

/* --- Titre / description --- */
.product-name{
  font-size:1.05rem; font-weight:800;
  margin:4px 0 0; color:#2b2b2b; line-height:1.35;
  display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
}
.product-card .product-name{
  margin-top:.25rem;
  margin-bottom:.15rem;
  line-height:1.2;
}
.product-card .product-preview{
  margin-top:0;
  margin-bottom:.35rem;
  font-size:.95rem;
  opacity:.70;
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
  overflow:hidden;
}

/* --- Prix (rangée du bas) --- */
.new-price-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  margin-top:2px;
  overflow:visible;            /* évite tout clipping des centimes */
}
.price-stack{
  display:flex;
  align-items:flex-end;
  gap:8px;
  overflow:visible;
}
.price-stack.has-promo .product-price{ color:#ef4444; }

.price-old{
  align-self:flex-end;
  color:#6b7280;
  font-weight:800;
  font-size:.95rem;
  text-decoration:line-through;
  text-decoration-thickness:2px;
  text-decoration-color:#d1d5db;
  margin:0;
}
.product-price{ font-weight:800; margin-top:4px; }
.product-price .euros{ font-size:1.1rem; }

.price, .product-price{
  line-height:1.15;
  overflow:visible;
}
.price .euros, .product-price .euros{
  display:inline-block;
  line-height:1;
}
.price .cents, .product-price .cents{
  position:relative;
  top:-.35em;                 /* comme sur Home */
  font-size:.8rem;
  vertical-align:baseline;
  display:inline-block;
  margin-left:2px;
}

/* --- Chip état stock (statut) --- */
/* Conteneur du chip : TOUJOURS inline-flex -> le point ne passe pas au-dessus */
.card-stock{
  display:inline-flex;
  align-items:center;         /* point centré par défaut */
  gap:6px;                    /* espace stable point/texte */
  font-weight:700;
  font-size:.9rem;
  padding:4px 8px;
  border-radius:999px;
  background:#ffffff;
  color:#374151;
  min-width:0;                /* autorise la compression dans la grille */
  max-width:100%;
}
.card-stock-dot{
  width:8px; height:8px;
  border-radius:50%;
  display:inline-block;
  flex:0 0 auto;
}

/* Couleurs de statut */
.card-stock.in{   background:var(--stock-in-bg);   color:var(--stock-in-tx);   border:1px solid var(--stock-in-br); }
.card-stock.warn{ background:var(--stock-warn-bg); color:var(--stock-warn-tx); border:1px solid var(--stock-warn-br); }
.card-stock.out{  background:var(--stock-out-bg);  color:var(--stock-out-tx);  border:1px solid var(--stock-out-br); }
.card-stock.in  .card-stock-dot{ background:#22c55e; }
.card-stock.warn .card-stock-dot{ background:#f59e0b; }
.card-stock.out .card-stock-dot{  background:#ef4444; }

/* IMPORTANT : on ne clamp PAS le conteneur, mais le TEXTE interne */
.card-stock .card-stock-txt{
  min-width:0;
  max-width:100%;
}

/* EN STOCK = 1 ligne max + ellipsis */
.card-stock.in .card-stock-txt{
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* EN RUPTURE & BIENTÔT EN RUPTURE = jusqu'à 2 lignes, propre, sans césure de mots */
.card-stock.out .card-stock-txt,
.card-stock.warn .card-stock-txt{
  white-space:normal;           /* autorise les retours à la ligne */
  display:-webkit-box;
  -webkit-line-clamp:2;         /* 2 lignes max */
  -webkit-box-orient:vertical;
  overflow:hidden;
  text-overflow:ellipsis;
  word-break:keep-all;          /* pas de coupure au milieu d’un mot */
  overflow-wrap:break-word;     /* casse seulement si très long */
}
/* Aligne visuellement le point sur la 1re ligne quand on a 2 lignes */
.card-stock.out .card-stock-dot,
.card-stock.warn .card-stock-dot{
  margin-top:.15em;
}

/* --- Responsive grid --- */
@media (max-width:1200px){
  .new-grid{ grid-template-columns:repeat(3, 1fr); }
}
@media (max-width:768px){
  .new-grid{ grid-template-columns:repeat(2, 1fr); }
}

/* ===== Override mobile (≤480px) : forcer 2 colonnes partout
   (ça annule les styles contradictoires d'autres feuilles) */
@media (max-width:480px){
  .category-page section#category-products > .new-grid,
  .category-page section#subcategory-products > .new-grid,
  section#news-products > .new-grid,
  section#promo-products > .new-grid{
    grid-template-columns:repeat(2, minmax(0,1fr)) !important;
    justify-items:stretch !important;
  }
  .category-page #category-products .product-card,
  .category-page #subcategory-products .product-card,
  #news-products .product-card,
  #promo-products .product-card{
    width:100% !important;
    max-width:none !important;
    margin:0 !important;
  }
}

/* ===== Mobile (≤520px) : ligne bas en grille compressible + tailles adaptées */
@media (max-width:520px){
  /* même layout que Home : statut compressible + prix à droite */
  .category-page #category-products .new-price-row,
  .category-page #subcategory-products .new-price-row{
    display:grid !important;
    grid-template-columns:minmax(0,1fr) auto !important;
    align-items:center !important;
    column-gap:8px !important;
    overflow:visible !important;       /* évite de rogner les centimes */
  }

  /* chip compact (le conteneur reste inline-flex) */
  .category-page #category-products .card-stock,
  .category-page #subcategory-products .card-stock{
    padding:4px 8px !important;
    font-size:.82rem !important;
    line-height:1.05 !important;
  }
  .category-page #category-products .card-stock-dot,
  .category-page #subcategory-products .card-stock-dot{
    width:7px !important; height:7px !important;
  }

  /* prix compact à droite */
  .category-page #category-products .price-stack,
  .category-page #subcategory-products .price-stack{
    display:flex !important;
    flex-direction:column !important;
    align-items:flex-end !important;
    gap:2px !important;
    line-height:1.05 !important;
  }
  .category-page #category-products .price .euros,
  .category-page #subcategory-products .price .euros{
    font-size:1rem !important;
  }
  .category-page #category-products .price .cents,
  .category-page #subcategory-products .price .cents{
    font-size:.75rem !important;
    vertical-align:super !important;
    top:-.35em !important;
  }
  .category-page #category-products .price-old,
  .category-page #subcategory-products .price-old{
    font-size:.85rem !important;
    margin:0 !important;
  }
}

/* Ultra-étroit (≤400px) : empilement si nécessaire (chip au-dessus, prix en dessous) */
@media (max-width:400px){
  .category-page #category-products .new-price-row,
  .category-page #subcategory-products .new-price-row{
    grid-template-columns:1fr !important;
    row-gap:4px !important;
  }
  .category-page #category-products .card-stock,
  .category-page #subcategory-products .card-stock{
    justify-self:start !important;
    padding:3px 7px !important;
    font-size:.78rem !important;
  }
  .category-page #category-products .price-stack,
  .category-page #subcategory-products .price-stack{
    justify-self:end !important;
  }
}



/* === Footer (statut + prix) collé en bas sans changer la taille des cards === */
.product-card{
  display:flex;
  flex-direction:column;
}

.product-card .product-meta{
  flex:1 1 auto;      /* prend l'espace restant */
  min-height:0;       /* évite les débordements avec les clamps */
}

/* clé : pousse la rangée prix en bas de la card */
.product-card > .new-price-row{
  margin-top:auto !important;   /* override le margin-top:2px défini plus haut */
}




