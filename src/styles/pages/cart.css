/* ========== Product card (listing) ========== */

.product-card{
  background:#f6f7f9;
  border-radius:20px;
  box-shadow:var(--shadow-2);
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:10px;
  transition:box-shadow .2s,transform .12s;
}
.product-card:hover{ transform:translateY(-2px); box-shadow:0 16px 36px rgba(0,0,0,.08); }

.product-thumb{
  position:relative;
  width:100%;
  aspect-ratio:4/3;
  background:#fff;
  border-radius:12px;
  overflow:hidden;
  display:flex; align-items:center; justify-content:center;
  padding:10px;
}
.product-thumb img,.product-thumb picture>img{ max-width:100%; max-height:100%; object-fit:contain!important; }

/* Badge “Promotion” */
.promo-pill{
  position:absolute; top:10px; right:10px; z-index:2;
  padding:6px 10px; border-radius:999px;
  font-weight:900; font-size:.85rem; line-height:1; color:#fff;
  background:linear-gradient(180deg,#5376e7,#3d77e4); border:1px solid #3971d8;
  box-shadow:var(--shadow-1);
}

/* Hover overlay + bouton ajouter */
.thumb-overlay{ position:absolute; inset:0; border-radius:12px; background:rgba(0,0,0,.18); opacity:0; transition:opacity .18s ease; pointer-events:none; }
.thumb-add-btn{
  position:absolute; right:10px; bottom:10px;
  width:42px; height:42px; border:0; border-radius:12px;
  background:#365afc; color:#fff;
  display:flex; align-items:center; justify-content:center;
  box-shadow:0 8px 20px rgba(0,0,0,.18);
  cursor:pointer; opacity:0; transform:translateY(6px); transition:opacity .18s,transform .18s,filter .18s;
}
.product-card:hover .thumb-overlay{ opacity:1; }
.product-card:hover .thumb-add-btn{ opacity:1; transform:translateY(0); }

.product-name{
  font-size:1.05rem; font-weight:800; margin:4px 0 0; color:#2b2b2b; line-height:1.35;
  display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
}

/* Prix */
.new-price-row{ display:flex; align-items:center; justify-content:space-between; gap:8px; margin-top:2px; }
.product-price{ font-weight:800; margin-top:4px; }
.product-price .euros{ font-size:1.1rem; }
.product-price .cents{ font-size:.8rem; vertical-align:super; margin-left:2px; }

/* Ancien prix barré + couleur promo */
.price-old{
  align-self:flex-end; color:#6b7280; font-weight:800; font-size:.95rem;
  text-decoration:line-through; text-decoration-thickness:2px; text-decoration-color:#d1d5db;
}
.product-price--promo .euros,.product-price--promo .cents{ color:#ef4444; }

/* Chips stock (générique) */
.card-stock{ display:inline-flex; align-items:center; gap:6px; font-weight:700; font-size:.9rem; padding:4px 8px; border-radius:999px; background:#f3f4f6; color:#374151; }
.card-stock-dot{ width:8px; height:8px; border-radius:50%; display:inline-block; }
.card-stock.in{ background:var(--stock-in-bg); color:var(--stock-in-tx); border:1px solid var(--stock-in-br); }
.card-stock.in .card-stock-dot{ background:#22c55e; }
.card-stock.warn{ background:var(--stock-warn-bg); color:var(--stock-warn-tx); border:1px solid var(--stock-warn-br); }
.card-stock.warn .card-stock-dot{ background:#f59e0b; }
.card-stock.out{ background:var(--stock-out-bg); color:var(--stock-out-tx); border:1px solid var(--stock-out-br); }
.card-stock.out .card-stock-dot{ background:#ef4444; }


/* ========== CART — Page panier ========== */

.cart-page{ max-width:1200px; margin:0 auto; padding:2rem; }

.cart-title{
  margin:0 0 1rem;
  font-size:1.8rem;
  font-weight:900;
  text-align:left;
}

/* Layout 2 colonnes */
.cart-grid{ display:grid; grid-template-columns:1fr 360px; gap:24px; }

.cart-lines{
  background:#fff; border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.06); overflow:hidden;
}

.cart-head{
  display:grid; grid-template-columns:1fr 140px 140px; gap:12px;
  padding:12px 16px; font-weight:900; color:#374151; border-bottom:1px solid #e5e7eb;
}

/* Ligne panier (desktop) */
.cart-line{
  display:grid;
  grid-template-columns: 1fr 140px 140px 36px; /* infos | qty | sub | X */
  align-items:center; gap:12px;
  padding:14px 16px; border-bottom:1px solid #f0f0f0;
}

/* Bloc gauche = media + infos */
.line-left{ display:grid; grid-template-columns:110px 1fr; gap:14px; align-items:start; min-width:0; }

.line-media{ display:flex; flex-direction:column; align-items:center; gap:8px; }
.cart-thumb{ width:100px; height:100px; border-radius:10px; object-fit:contain; background:#f6f7f9; }

.line-info .line-name{
  display:inline-block; margin:0;
  color:#111827; font-weight:900; text-decoration:none;
}
.line-info .line-name:hover{ text-decoration:underline; }

.line-info{ min-width:0; }

/* Titre + badge (desktop) : badge sous le nom */
.line-title{
  display:flex; flex-direction:column; align-items:flex-start; gap:6px;
}
.line-title .line-name{
  /* 1 SEULE ligne, pas de troncature ni de … */
  white-space:nowrap; overflow:visible; text-overflow:clip; max-width:none;
}
.line-title .card-stock{ margin-top:2px; }

.line-alert{ color:#dc2626; font-weight:700; margin-top:6px; }

/* Code promo (ligne produit) */
.line-code{
  display:inline-block; margin-top:6px; font-weight:700; font-size:.85rem; color:#1569e6;
}

/* Quantité / sous-total / suppression */
.line-qty{ justify-self:center; }
.qty-select{ padding:.6rem .8rem; border-radius:12px; border:1px solid #ddd; background:#fff; }

.line-sub{ justify-self:end; text-align:right; white-space:nowrap; font-weight:900; font-size:1.05rem; }

.line-remove{
  width:32px; height:32px; border-radius:10px; border:0; background:#f3f4f6;
  display:grid; place-items:center; cursor:pointer;
}
.line-remove:hover{ background:#e5e7eb; }

/* Bloc code promo (bas) */
.cart-promo{
  background:#fafafa; border:1px dashed #e5e7eb; border-radius:12px;
  padding:16px; margin-top:16px;
}
.promo-title{ margin:0 0 8px; color:#374151; font-weight:800; }
.promo-row{ display:flex; gap:10px; }
.promo-input{ flex:1; }
.promo-btn{ border:0; border-radius:12px; padding:10px 18px; background:#111; color:#fff; cursor:pointer; font-weight:800; }
.promo-btn:hover{ filter:brightness(.95); }
.promo-applied{ margin-top:8px; color:#059669; font-weight:800; }

/* Récap / checkout (colonne droite) */
.cart-summary{
  position:sticky; top:110px; align-self:start;
  background:#fff; border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.06);
  padding:18px;
}
.sum-title{
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  margin:0 0 10px; font-weight:900;
}
.sum-amount{ font-size:2rem; font-weight:900; margin-bottom:8px; }

.checkout-btn,
.checkout-btn-disabled{
  width:100%; border:0; border-radius:999px; padding:14px 18px; color:#fff; font-weight:900; margin:10px 0 8px;
}
.checkout-btn{ background:linear-gradient(135deg,#3b79ff,#2c5dff); cursor:pointer; }
.checkout-btn:hover{ filter:brightness(.98); }
.checkout-btn-disabled{ background:linear-gradient(135deg,#68686867,#4b4b4b41); }

/* ========= Responsive ========= */

/* Largeur page */
@media (max-width:992px){
  .cart-grid{ grid-template-columns:1fr; }
}

/* ===== MOBILE (≤680px) =====
   L1: header (nom + badge) centré + trait
   L2: image | qty | sub | remove
*/
@media (max-width:680px){

  /* Nouvelle grille */
  .cart-line{
    grid-template-columns:96px 1fr auto 36px;
    grid-template-areas:
      "header header header header"
      "media  qty    sub    remove";
    align-items:start; row-gap:10px;
  }

  .line-left{ display:contents; }
  .line-info{ display:contents; }

  /* Header centré */
  .line-title{
    grid-area:header;
    display:flex; flex-direction:row; justify-content:center; align-items:center;
    gap:8px; flex-wrap:wrap; text-align:center;
    padding-bottom:8px; border-bottom:1px solid #eee; margin-bottom:4px;
    background:#000; color:#0e1d61; border-radius:8px; padding:6px 10px;
  }
  .line-title .line-name{
    color:#fff;
    white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:70%;
  }
  .line-title .card-stock{ background:rgba(255,255,255,.2); color:#fff; border:none; }
  .line-title .card-stock-dot{ background:#fff; }

  /* L2 */
  .line-media{ grid-area:media; }
  .line-qty{ grid-area:qty; justify-self:start; }
  .line-sub{ grid-area:sub; justify-self:end; text-align:right; }
  .line-remove{ grid-area:remove; justify-self:end; }

  .cart-thumb{ width:84px; height:84px; }

  /* “Code appliqué : SS10” → une seule ligne ET entier (scroll horizontal discret) */
  .line-code{
    display:block;
    white-space:nowrap;
    overflow-x:auto; overflow-y:visible; -webkit-overflow-scrolling:touch; max-width:100%;
    scrollbar-width:none;
  }
  .line-code::-webkit-scrollbar{ display:none; }

  .d-none-mobile{ display:none; }
}

/* MOBILE : afficher "Code appliqué : SS10" en ENTIER (sans coupe) */
@media (max-width:680px){
  .line-code{
    display:inline-flex;
    align-items:center;
    gap:6px;
    white-space:nowrap;     /* une ligne */
    overflow:visible;       /* ne masque pas */
    text-overflow:clip;
    width:auto; 
    max-width:100%;
  }
}



/* ============================
   CART — ultra-petits écrans
   ============================ */
@media (max-width: 400px){

  /* gouttières + titres plus compacts */
  .cart-page{ padding: 12px; }
  .cart-title{ font-size: 1.45rem; }

  /* évite de couper du contenu à l'intérieur */
  .cart-lines{ overflow: visible; }

  /* --- Ligne panier : 3 rangées empilées
     1) header (nom + badge)
     2) image | qty | X
     3) image | sub | X
  ------------------------------------------------ */
  .cart-line{
    grid-template-columns: 78px 1fr 32px;
    grid-template-areas:
      "header header header"
      "media  qty    remove"
      "media  sub    remove";
    row-gap: 8px;
    column-gap: 10px;
    padding: 12px;
  }

  /* zone gauche éclatée dans les aires */
  .line-left, .line-info{ display: contents; }

  .line-title{
    grid-area: header;
    display: flex; align-items: center; justify-content: center;
    gap: 8px; flex-wrap: wrap; text-align: center;
    padding: 6px 8px; margin-bottom: 4px;
    border-bottom: 1px solid #eee; border-radius: 8px;
    background: #000; color: #fff;
  }
  .line-title .line-name{
    max-width: 100%;
    white-space: normal;               /* autorise retour à la ligne */
    overflow: visible; text-overflow: clip;
  }
  .line-title .card-stock{
    background: rgba(255,255,255,.18); color: #fff; border: none;
  }
  .line-title .card-stock-dot{ background: #fff; }

  .line-media{ grid-area: media; }
  .cart-thumb{ width: 70px; height: 70px; }

  .line-qty{ grid-area: qty; justify-self: start; }
  .qty-select{ width: 90px; }

  /* Prix sous la quantité, lisible et non coupé */
  .line-sub{
    grid-area: sub;
    justify-self: start; text-align: left;
    white-space: normal;               /* peut passer à la ligne */
    overflow-wrap: anywhere;           /* coupe proprement si nécessaire */
    font-size: 1rem; line-height: 1.2;
  }

  .line-remove{ grid-area: remove; justify-self: end; width: 30px; height: 30px; }

  /* "Code appliqué : XXXX" toujours visible */
  .line-code{
    display: block;
    white-space: normal;
    overflow: visible; text-overflow: clip;
    word-break: break-word;
  }

  /* Bloc code promo : champs/bouton sur 2 lignes full-width */
  .cart-promo{ padding: 12px; }
  .promo-row{ flex-direction: column; gap: 8px; }
  .promo-input{ width: 100%; }
  .promo-btn{
    width: 100%; padding: 12px; border-radius: 12px;
    font-weight: 800;
  }

  /* Résumé : pas de sticky pour éviter les chevauchements courts */
  .cart-summary{
    position: static; padding: 14px; border-radius: 12px;
  }
  .sum-amount{ font-size: 1.6rem; }
  .checkout-btn, .checkout-btn-disabled{
    padding: 12px 16px; font-size: 1rem;
  }
}
